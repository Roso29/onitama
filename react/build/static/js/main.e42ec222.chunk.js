(this.webpackJsonponitama_react=this.webpackJsonponitama_react||[]).push([[0],{26:function(e,t,r){},27:function(e,t,r){},35:function(e,t){},36:function(e,t,r){},37:function(e,t,r){"use strict";r.r(t);var n=r(2),c=r(5),a=r.n(c),i=r(19),l=r.n(i),s=(r(26),r(8)),o=r(4);r(27);function d(e){var t=e.pos,r=e.player,a=e.data,i=e.thisCardSelected,l=Object(o.a)(t,2),s=l[0],d=l[1],u=(s+d)%2===0?"var(--light)":"transparent",j=Object(c.useState)(u),p=Object(o.a)(j,2),b=p[0],h=p[1];return console.log(t,r,a),Object(c.useEffect)((function(){a[2===r?5-s-1:s][2===r?5-d-1:d]?(h("var(--cardValid"),i&&h("var(--cardValidHighlight")):s===d&&2===s?(h("var(--cardCenter"),i&&h("var(--cardCenterHighlight")):h(u)}),[u,i,a,r,s,d]),Object(n.jsx)("div",{style:{background:b,gridRow:t[0]+1,gridColumn:t[1]+1}})}function u(e){var t,r,c=e.data,a=e.id,i=e.player,l=e.currentPlayer,s=e.setCardSelected,o=e.cardSelected,u=[];for(t=0;t<5;t++)for(r=0;r<5;r++)u.push(Object(n.jsx)(d,{pos:[t,r],player:i,data:c,thisCardSelected:o&&o.id===a&&l===i},"card"+i+a+t+", "+r));return Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(n.jsx)("div",{style:{width:200,height:200,display:"grid",gridTemplateRows:"1fr ".repeat(5),gridTemplateColumns:"1fr ".repeat(5)},onClick:function(){i===l&&"next"!==a&&s({id:a,data:c})},children:u}),"next"===a?"Next card":null]})}function j(e){var t=e.player;return Object(n.jsx)("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:Object(n.jsx)("polygon",{points:"0,100 50,0, 100,100",fill:1===t?"var(--lightPiece)":"var(--darkPiece)"})})}function p(e){var t=e.player;return Object(n.jsx)("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",children:Object(n.jsx)("polygon",{points:"0,100 16,0 32,60 48,0 64,60 80,0 100,100",fill:1===t?"var(--lightPiece)":"var(--darkPiece)"})})}function b(e){var t=e.name,r=e.pos,c=e.player,a=e.i,i=e.currentPlayer,l=e.clickSquare,s=e.setPieceSelected,d=Object(o.a)(r,2),u=d[0],b=d[1];return Object(n.jsxs)("div",{onClick:function(){i===c?(console.log("Piece clicked",t,r,i,a,c),s({name:t,player:c,i:a,pos:r})):c!==i&&l(r)},style:{gridRow:u+1,gridColumn:b+1,height:"80%",width:"80%",overflow:"hidden",position:"relative",alignSelf:"end",justifySelf:1===c?"start":"end"},children:["king"===t?Object(n.jsx)(p,{player:c}):Object(n.jsx)(j,{player:c}),a||0===a?Object(n.jsx)("p",{style:{position:"absolute",top:0,right:0,fontWeight:600},children:a}):null]})}function h(e){return Object(n.jsx)(b,Object(s.a)(Object(s.a)({},e),{},{name:"king"}))}function f(e){return Object(n.jsx)(b,Object(s.a)(Object(s.a)({},e),{},{name:"pawn"}))}var y=r(39);function g(e){var t,r,c=e.state,a=e.bindSquares,i=e.setPieceSelected,l=e.currentPlayer,s=e.pieceSelected,o=e.cardSelected,d=e.playerData,u=[];for(t=0;t<5;t++)for(r=0;r<5;r++)u.push(Object(n.jsx)(O,{pos:[t,r],pieceSelected:s,bindSquares:a,cardSelected:o,currentPlayer:l,playerData:d},t+", "+r));var j=[],p=function(e,t){j.push(Object(n.jsx)(h,{player:t,pos:e.king,clickSquare:a,setPieceSelected:i,currentPlayer:l,pieceSelected:s},t+"king")),e.pawns.map((function(e,r){return j.push(Object(n.jsx)(f,{pos:e,i:r,player:t,clickSquare:a,setPieceSelected:i,currentPlayer:l,pieceSelected:s},t+"pawn"+r))}))};return p(c.player2,2),p(c.player1,1),Object(n.jsx)("div",{children:Object(n.jsxs)("div",{style:{width:600,height:600,display:"grid",gridTemplateRows:"20% ".repeat(5),gridTemplateColumns:"20% ".repeat(5)},children:[u,j]})})}function O(e){var t=e.pos,r=e.pieceSelected,a=e.currentPlayer,i=e.cardSelected,l=e.bindSquares,s=e.playerData,d=Object(o.a)(t,2),u=(d[0]+d[1])%2===0?"var(--light)":"transparent",j=Object(c.useState)(u),p=Object(o.a)(j,2),b=p[0],h=p[1],f=Object(c.useState)(!1),g=Object(o.a)(f,2),O=g[0],v=g[1];return Object(c.useEffect)((function(){var e=Object(o.a)(t,2),n=e[0],c=e[1];var l=u;if(r&&i){var d=function(){var e=!1,l=i.data,d=y.b(y.a([n,c],[2,2]),r.pos),u=Object(o.a)(d,2),j=u[0],p=u[1],b=2===a?4-j:j,h=2===a?4-p:p;return 0<=b&&b<=4&&0<=h&&h<=4&&l[b][h]&&!(t.every((function(e,t){return e===s.king[t]}))?(console.log(s.king,s.pawns,t,!0),1):s.pawns.some((function(e){return t.every((function(t,r){return t===e[r]}))})))&&(e=!0),e}();v(d),d&&(l="var(--validMove)")}h(l)}),[O,u,r,i,t,a,s]),Object(n.jsx)("div",{style:{background:b,gridRow:t[0]+1,gridColumn:t[1]+1},onClick:function(){l&&O&&l(t)}})}r(36);function v(e){var t=e.state,r=e.sendMove,a=e.resetGame,i=e.toggleGameMode,l=e.stepBot,s=Object(c.useState)(null),d=Object(o.a)(s,2),j=d[0],p=d[1],b=Object(c.useState)(null),h=Object(o.a)(b,2),f=h[0],O=h[1],v=t.player,x=1===v?t.player1:t.player2;return Object(c.useEffect)((function(){O({id:0,data:x.cards[0]})}),[x]),Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"100%",justifyContent:"space-around"},children:[Object(n.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"space-around"},children:[Object(n.jsxs)("div",{className:"cardDiv",children:[Object(n.jsx)("h2",{children:"Player 1"}),Object(n.jsx)(u,{data:t.player1.cards[0],player:1,id:0,setCardSelected:O,currentPlayer:v,cardSelected:f}),Object(n.jsx)(u,{data:t.player1.cards[1],player:1,id:1,setCardSelected:O,currentPlayer:v,cardSelected:f})]}),Object(n.jsx)(g,{state:t,bindSquares:function(e){!function(e){if(j){var t=Object(o.a)(e,2),r=t[0],n=t[1],c=f.data,a=y.b(y.a([r,n],[2,2]),j.pos),i=Object(o.a)(a,2),l=i[0],s=i[1],d=2===v?4-l:l,u=2===v?4-s:s;if(0<=d&&d<=4&&0<=u&&u<=4&&c[d][u])return!0}return!1}(e)?p(null):(r(j,f,e),p(null),O(0))},setPieceSelected:p,currentPlayer:v,pieceSelected:j,cardSelected:f,playerData:x}),Object(n.jsxs)("div",{className:"cardDiv",children:[Object(n.jsx)("h2",{style:{color:"var(--darkPiece)"},children:"Player 2"}),Object(n.jsx)(u,{data:t.player2.cards[0],player:2,id:0,setCardSelected:O,currentPlayer:v,cardSelected:f}),Object(n.jsx)(u,{data:t.player2.cards[1],player:2,id:1,setCardSelected:O,currentPlayer:v,cardSelected:f})]})]}),Object(n.jsxs)("div",{style:{display:"flex",margin:"0 auto",marginTop:25,width:"50%",justifyContent:"space-around"},children:[3===t.winner?Object(n.jsx)("h2",{style:{color:"var(--light)"},children:"Draw"}):0===t.winner?Object(n.jsx)(u,{data:t.spare_card,player:1,currentPlayer:1,id:"next"}):Object(n.jsxs)("h2",{style:{color:"var(--light)"},children:["Winner Player ",t.winner]}),Object(n.jsxs)("div",{style:{margin:10,display:"flex",flexDirection:"column",justifyContent:"center"},children:[Object(n.jsx)("button",{style:{background:"var(--light)",color:"var(--darkPiece)",fontSize:"1.5rem",border:0,borderRadius:10,marginTop:3},onClick:a,children:"Reset"}),Object(n.jsx)("button",{style:{background:"var(--light)",color:"var(--darkPiece)",fontSize:"1.5rem",border:0,borderRadius:10,marginTop:3},onClick:i,children:"Toggle game mode"}),Object(n.jsx)("button",{style:{background:"var(--light)",color:"var(--darkPiece)",fontSize:"1.5rem",border:0,borderRadius:10,marginTop:3},onClick:l,children:"Step bot"}),Object(n.jsxs)("p",{children:["Turn: Player ",v]}),Object(n.jsxs)("p",{children:["Mode: ",t.mode]})]})]})]})}var x=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),r=t[0],a=t[1],i=function(){fetch("http://localhost:5000/getState").then((function(e){return e.json()})).then((function(e){a(e)}))};return Object(c.useEffect)((function(){r||i()})),Object(n.jsx)("div",{className:"App",children:Object(n.jsx)("header",{className:"App-header",children:r?Object(n.jsx)(v,{state:r,readApi:i,sendMove:function(e,t,r){var n=Object(s.a)(Object(s.a)({},e),{},{id:t.id,pos:r});fetch("http://localhost:5000/sendMove",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){a(e),0!==e.winner&&alert("Winner is player "+e.winner)}))},resetGame:function(){fetch("http://localhost:5000/reset").then((function(e){return e.json()})).then((function(e){a(e)}))},toggleGameMode:function(){fetch("http://localhost:5000/toggleGameMode").then((function(e){return e.json()})).then((function(e){a(e)}))},stepBot:function(){0===r.winner&&fetch("http://localhost:5000/stepBot").then((function(e){return e.json()})).then((function(e){a(e)}))}}):Object(n.jsx)(n.Fragment,{children:"No board state, check Flask backend"})})})},S=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,40)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;r(e),n(e),c(e),a(e),i(e)}))};l.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(x,{})}),document.getElementById("root")),S()}},[[37,1,2]]]);
//# sourceMappingURL=main.e42ec222.chunk.js.map