{"version":3,"sources":["components/Card.js","components/Pieces.js","components/Board.js","components/Game.js","App.js","reportWebVitals.js","index.js"],"names":["CardSquare","pos","player","data","thisCardSelected","i","j","initColour","useState","colour","setColour","console","log","useEffect","style","background","gridRow","gridColumn","Card","id","currentPlayer","setCardSelected","cardSelected","squares","push","display","flexDirection","width","height","gridTemplateRows","repeat","gridTemplateColumns","onClick","PawnSvg","viewBox","xmlns","points","fill","KingSvg","Piece","name","clickSquare","setPieceSelected","row","col","overflow","position","alignSelf","justifySelf","top","right","fontWeight","King","props","Pawn","Board","state","bindSquares","pieceSelected","playerData","Square","pieces","placePlayer","king","pawns","map","player2","player1","validMove","setValidMove","newColour","valid","cardData","mathjs","iCard","jCard","iFlipped","jFlipped","every","v","some","pawnPos","isValidMove","Game","sendMove","resetGame","toggleGameMode","stepBot","cards","justifyContent","className","color","margin","marginTop","winner","spare_card","fontSize","border","borderRadius","mode","App","boardState","setBoardState","readApi","fetch","then","res","json","piece","card","move","method","headers","Accept","body","JSON","stringify","alert","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e42ec222.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { set } from \"mathjs/lib/esm/utils/object\";\n\nexport function CardSquare({ pos, player, data, thisCardSelected }) {\n  const [i, j] = pos;\n  const initColour = (i + j) % 2 === 0 ? \"var(--light)\" : \"transparent\";\n  const [colour, setColour] = useState(initColour);\n  console.log(pos, player, data);\n  useEffect(() => {\n    // if it's valid then blue\n    // server is row, col\n    if (data[player === 2 ? 5 - i - 1 : i][player === 2 ? 5 - j - 1 : j]) {\n      setColour(\"var(--cardValid\");\n      if (thisCardSelected) setColour(\"var(--cardValidHighlight\");\n    } else if (i === j && i === 2) {\n      setColour(\"var(--cardCenter\");\n      if (thisCardSelected) setColour(\"var(--cardCenterHighlight\");\n    } else {\n      setColour(initColour);\n    }\n  }, [initColour, thisCardSelected, data, player, i, j]);\n\n  return (\n    <div\n      style={{\n        background: colour,\n        gridRow: pos[0] + 1,\n        gridColumn: pos[1] + 1,\n      }}\n    />\n  );\n}\n\nexport default function Card({\n  data,\n  id,\n  player,\n  currentPlayer,\n  setCardSelected,\n  cardSelected,\n}) {\n  const onClick = () => {\n    if (player === currentPlayer && id !== \"next\")\n      setCardSelected({ id, data });\n  };\n\n  // 5 x 5 grid of divs\n  let i, j;\n  let squares = [];\n  for (i = 0; i < 5; i++) {\n    for (j = 0; j < 5; j++) {\n      squares.push(\n        <CardSquare\n          key={\"card\" + player + id + i + \", \" + j}\n          pos={[i, j]}\n          player={player}\n          data={data}\n          thisCardSelected={\n            cardSelected && cardSelected.id === id && currentPlayer === player\n          }\n        />\n      );\n    }\n  }\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n      }}\n    >\n      <div\n        style={{\n          width: 200,\n          height: 200,\n          display: \"grid\",\n          gridTemplateRows: \"1fr \".repeat(5),\n          gridTemplateColumns: \"1fr \".repeat(5),\n        }}\n        onClick={onClick}\n      >\n        {squares}\n      </div>\n      {id === \"next\" ? \"Next card\" : null}\n    </div>\n  );\n}\n","import React from \"react\";\n\nfunction PawnSvg({player}) {\n    return <svg viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\n        <polygon points=\"0,100 50,0, 100,100\" fill={player === 1 ? \"var(--lightPiece)\" : \"var(--darkPiece)\"}/>\n    </svg>;\n}\n\nfunction KingSvg({player}) {\n    return <svg viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\">\n        <polygon points=\"0,100 16,0 32,60 48,0 64,60 80,0 100,100\" fill={player === 1 ? \"var(--lightPiece)\" : \"var(--darkPiece)\"}/>\n    </svg>;\n}\n\nfunction Piece({\n                   name,\n                   pos,\n                   player,\n                   i,\n                   currentPlayer,\n                   clickSquare,\n                   setPieceSelected,\n               }) {\n    let [row, col] = pos;\n    const clickHandler = () => {\n        if (currentPlayer === player) {\n            console.log(\"Piece clicked\", name, pos, currentPlayer, i, player);\n            setPieceSelected({name, player, i, pos});\n        } else if (player !== currentPlayer) {\n            // try to take\n            clickSquare(pos);\n        }\n    };\n    return (\n        <div\n            onClick={clickHandler}\n            style={{\n                gridRow: row + 1,\n                gridColumn: col + 1,\n                height: \"80%\",\n                width: \"80%\",\n                overflow: \"hidden\",\n                position: \"relative\",\n                alignSelf: \"end\",\n                justifySelf: player === 1 ? \"start\" : \"end\"\n            }}\n        >\n            {name === \"king\" ? <KingSvg player={player}/> : <PawnSvg player={player}/>}\n            {(i || i === 0) ? <p style={{position: \"absolute\", top: 0, right: 0, fontWeight: 600,}}>{i}</p> : null}\n        </div>\n    );\n}\n\nfunction King(props) {\n    return <Piece {...props} name={\"king\"}/>;\n}\n\nfunction Pawn(props) {\n    return <Piece {...props} name={\"pawn\"}/>;\n}\n\nexport {King, Pawn};\n","import React, { useState, useEffect } from \"react\";\nimport { King, Pawn } from \"./Pieces\";\nimport * as mathjs from \"mathjs\";\n\nexport default function Board({\n  state,\n  bindSquares,\n  setPieceSelected,\n  currentPlayer,\n  pieceSelected,\n  cardSelected,\n  playerData,\n}) {\n  // 5 x 5 grid of divs\n  let i, j;\n  let squares = [];\n  for (i = 0; i < 5; i++) {\n    for (j = 0; j < 5; j++) {\n      squares.push(\n        <Square\n          key={i + \", \" + j}\n          pos={[i, j]}\n          pieceSelected={pieceSelected}\n          bindSquares={bindSquares}\n          cardSelected={cardSelected}\n          currentPlayer={currentPlayer}\n          playerData={playerData}\n        />\n      );\n    }\n  }\n\n  // place pieces\n  let pieces = [];\n  const placePlayer = (data, player) => {\n    // king\n    pieces.push(\n      <King\n        key={player + \"king\"}\n        player={player}\n        pos={data.king}\n        clickSquare={bindSquares}\n        setPieceSelected={setPieceSelected}\n        currentPlayer={currentPlayer}\n        pieceSelected={pieceSelected}\n      />\n    );\n    // pawns\n    data.pawns.map((pos, i) =>\n      pieces.push(\n        <Pawn\n          key={player + \"pawn\" + i}\n          pos={pos}\n          i={i}\n          player={player}\n          clickSquare={bindSquares}\n          setPieceSelected={setPieceSelected}\n          currentPlayer={currentPlayer}\n          pieceSelected={pieceSelected}\n        />\n      )\n    );\n  };\n\n  // place current player last so we see them on top\n  if (currentPlayer === 1) {\n    placePlayer(state.player2, 2);\n    placePlayer(state.player1, 1);\n  }\n  else {\n    placePlayer(state.player2, 2);\n    placePlayer(state.player1, 1);\n  }\n\n  return (\n    <div>\n      <div\n        style={{\n          width: 600,\n          height: 600,\n          display: \"grid\",\n          gridTemplateRows: \"20% \".repeat(5),\n          gridTemplateColumns: \"20% \".repeat(5),\n        }}\n      >\n        {squares}\n        {pieces}\n      </div>\n    </div>\n  );\n}\n\nexport function Square({\n  pos,\n  pieceSelected,\n  currentPlayer,\n  cardSelected,\n  bindSquares,\n  playerData,\n}) {\n  const [i, j] = pos;\n  const initColour = (i + j) % 2 === 0 ? \"var(--light)\" : \"transparent\";\n  const [colour, setColour] = useState(initColour);\n  const [validMove, setValidMove] = useState(false);\n\n  const clickHandler = () => {\n    if (bindSquares && validMove) bindSquares(pos);\n  };\n\n  useEffect(() => {\n    const [i, j] = pos;\n\n    function isOccupied() {\n      // check king\n      if (pos.every((v, i) => v === playerData.king[i])) {\n        console.log(playerData.king, playerData.pawns, pos, true);\n        return true;\n      }\n      // otherwise occupied if any pawns are\n      return playerData.pawns.some((pawnPos) => {\n        return pos.every((v, i) => v === pawnPos[i]);\n      });\n    }\n\n    const isValidMove = () => {\n      let valid = false;\n      const cardData = cardSelected.data;\n      // where on card is this wrt selected piece\n      const [iCard, jCard] = mathjs.subtract(\n        mathjs.add([i, j], [2, 2]),\n        pieceSelected.pos\n      );\n      // need to flip if other player\n      let iFlipped = currentPlayer === 2 ? 4 - iCard : iCard;\n      let jFlipped = currentPlayer === 2 ? 4 - jCard : jCard;\n      // card values are 1 and 0\n      if (0 <= iFlipped && iFlipped <= 4 && 0 <= jFlipped && jFlipped <= 4) {\n        if (cardData[iFlipped][jFlipped] && !isOccupied()) {\n          valid = true;\n        }\n      }\n      return valid;\n    };\n\n    let newColour = initColour;\n\n    if (pieceSelected && cardSelected) {\n      const valid = isValidMove();\n      setValidMove(valid);\n      if (valid) {\n        newColour = \"var(--validMove)\";\n      }\n    }\n    setColour(newColour);\n  }, [\n    validMove,\n    initColour,\n    pieceSelected,\n    cardSelected,\n    pos,\n    currentPlayer,\n    playerData,\n  ]);\n\n  return (\n    <div\n      style={{\n        background: colour,\n        gridRow: pos[0] + 1,\n        gridColumn: pos[1] + 1,\n      }}\n      onClick={clickHandler}\n    />\n  );\n}\n","import React, {useState, useEffect} from \"react\";\nimport Card from \"./Card\";\nimport Board, {Square} from \"./Board\";\nimport * as mathjs from \"mathjs\";\nimport \"./Game.css\";\n\n\nexport default function Game({state, sendMove, resetGame, toggleGameMode, stepBot}) {\n    const [pieceSelected, setPieceSelected] = useState(null);\n    const [cardSelected, setCardSelected] = useState(null);\n    const currentPlayer = state.player;\n\n    const playerData = currentPlayer === 1 ? state.player1 : state.player2;\n\n    useEffect(() => {\n        // init to 1st card\n        setCardSelected({id: 0, data: playerData.cards[0]});\n    }, [playerData]);\n\n    // after move reset state\n    function afterMove() {\n        setPieceSelected(null);\n        setCardSelected(0);\n    }\n\n    function validMove(pos) {\n        if (pieceSelected) {\n            const [i, j] = pos;\n            const cardData = cardSelected.data;\n            // where on card is this wrt selected piece\n            const [iCard, jCard] = mathjs.subtract(\n                mathjs.add([i, j], [2, 2]),\n                pieceSelected.pos\n            );\n            // need to flip if other player\n            let iFlipped = currentPlayer === 2 ? 4 - iCard : iCard;\n            let jFlipped = currentPlayer === 2 ? 4 - jCard : jCard;\n            // card values are 1 and 0\n            if (0 <= iFlipped && iFlipped <= 4 && 0 <= jFlipped && jFlipped <= 4) {\n                if (cardData[iFlipped][jFlipped]) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    function bindSquares(pos) {\n        // note this can be called from squares and from pieces\n        // where pieces need to propagate click down eg. when taking\n        // check occupied done in squares / pieces\n        // here we just check it's a valid move on the card\n        if (validMove(pos)) {\n            sendMove(pieceSelected, cardSelected, pos);\n            afterMove();\n        } else {\n            setPieceSelected(null);\n        }\n    }\n\n    return (\n        <div\n            style={{\n                display: \"flex\",\n                flexDirection: \"column\",\n                height: \"100%\",\n                width: \"100%\",\n                justifyContent: \"space-around\",\n            }}\n        >\n            <div\n                style={{\n                    display: \"flex\",\n                    width: \"100%\",\n                    justifyContent: \"space-around\",\n                }}\n            >\n                <div className=\"cardDiv\">\n                    <h2>Player 1</h2>\n                    <Card\n                        data={state.player1.cards[0]}\n                        player={1}\n                        id={0}\n                        setCardSelected={setCardSelected}\n                        currentPlayer={currentPlayer}\n                        cardSelected={cardSelected}\n                    />\n                    <Card\n                        data={state.player1.cards[1]}\n                        player={1}\n                        id={1}\n                        setCardSelected={setCardSelected}\n                        currentPlayer={currentPlayer}\n                        cardSelected={cardSelected}\n                    />\n                </div>\n                <Board\n                    state={state}\n                    bindSquares={bindSquares}\n                    setPieceSelected={setPieceSelected}\n                    currentPlayer={currentPlayer}\n                    pieceSelected={pieceSelected}\n                    cardSelected={cardSelected}\n                    playerData={playerData}\n                />\n                <div className=\"cardDiv\">\n                    <h2 style={{color: \"var(--darkPiece)\"}}>Player 2</h2>\n                    <Card\n                        data={state.player2.cards[0]}\n                        player={2}\n                        id={0}\n                        setCardSelected={setCardSelected}\n                        currentPlayer={currentPlayer}\n                        cardSelected={cardSelected}\n                    />\n                    <Card\n                        data={state.player2.cards[1]}\n                        player={2}\n                        id={1}\n                        setCardSelected={setCardSelected}\n                        currentPlayer={currentPlayer}\n                        cardSelected={cardSelected}\n                    />\n                </div>\n            </div>\n            <div\n                style={{\n                    display: \"flex\",\n                    margin: \"0 auto\",\n                    marginTop: 25,\n                    width: \"50%\",\n                    justifyContent: \"space-around\",\n                }}\n            >\n                {/*Display spare card or winner if game over*/}\n                {state.winner === 3 ? <h2 style={{color: \"var(--light)\"}}>Draw</h2> :\n                    state.winner === 0 ? <Card data={state.spare_card} player={1} currentPlayer={1} id=\"next\"/>\n                        : <h2 style={{color: \"var(--light)\"}}>Winner Player {state.winner}</h2>}\n                <div\n                    style={{\n                        margin: 10,\n                        display: \"flex\",\n                        flexDirection: \"column\",\n                        justifyContent: \"center\",\n                    }}\n                >\n                    <button style={{\n                        background: \"var(--light)\", color: \"var(--darkPiece)\", fontSize: \"1.5rem\",\n                        border: 0, borderRadius: 10, marginTop: 3\n                    }}\n                            onClick={resetGame}>Reset\n                    </button>\n                    <button style={{\n                        background: \"var(--light)\", color: \"var(--darkPiece)\", fontSize: \"1.5rem\",\n                        border: 0, borderRadius: 10, marginTop: 3\n                    }}\n                            onClick={toggleGameMode}>Toggle game mode\n                    </button>\n                    <button style={{\n                        background: \"var(--light)\", color: \"var(--darkPiece)\", fontSize: \"1.5rem\",\n                        border: 0, borderRadius: 10, marginTop: 3\n                    }}\n                            onClick={stepBot}>Step bot\n                    </button>\n                    <p>Turn: Player {currentPlayer}</p>\n                    <p>Mode: {state.mode}</p>\n                </div>\n            </div>\n        </div>\n    );\n}\n","import React, {useState, useEffect} from \"react\";\nimport \"./App.css\";\nimport Game from \"./components/Game\";\n\nfunction App() {\n    const [boardState, setBoardState] = useState(null);\n\n    const readApi = () => {\n        fetch(\"http://localhost:5000/getState\")\n            .then((res) => res.json())\n            .then((data) => {\n                setBoardState(data);\n            });\n    };\n\n    const sendMove = (piece, card, pos) => {\n        const move = {...piece, id: card.id, pos};\n        fetch(\"http://localhost:5000/sendMove\", {\n            method: \"POST\",\n            headers: {\n                Accept: \"application/json\",\n                \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify(move),\n        })\n            .then((res) => res.json())\n            .then((data) => {\n                setBoardState(data);\n                if (data.winner !== 0) {\n                    alert(\"Winner is player \" + data.winner);\n                }\n            });\n    };\n\n    const resetGame = () => {\n        fetch(\"http://localhost:5000/reset\")\n            .then((res) => res.json())\n            .then((data) => {\n                setBoardState(data);\n            });\n    };\n\n    const toggleGameMode = () => {\n        fetch(\"http://localhost:5000/toggleGameMode\")\n            .then((res) => res.json())\n            .then((data) => {\n                setBoardState(data);\n            });\n    };\n\n    const stepBot = () => {\n        if (boardState.winner !== 0) {return}\n        fetch(\"http://localhost:5000/stepBot\")\n            .then((res) => res.json())\n            .then((data) => {\n                setBoardState(data);\n            });\n    };\n\n    useEffect(() => {\n        if (!boardState) readApi();\n    });\n\n    return (\n        <div className=\"App\">\n            <header className=\"App-header\">\n                {boardState ? (\n                    <Game\n                        state={boardState}\n                        readApi={readApi}\n                        sendMove={sendMove}\n                        resetGame={resetGame}\n                        toggleGameMode={toggleGameMode}\n                        stepBot={stepBot}\n                    />\n                ) : (\n                    <>No board state, check Flask backend</>\n                )}\n            </header>\n        </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}